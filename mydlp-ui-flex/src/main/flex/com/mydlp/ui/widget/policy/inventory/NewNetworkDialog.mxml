<?xml version="1.0" encoding="utf-8"?>
<general:ClosableTitleWindow xmlns:fx="http://ns.adobe.com/mxml/2009" 
							 xmlns:s="library://ns.adobe.com/flex/spark" 
							 xmlns:mx="library://ns.adobe.com/flex/mx" layout="absolute"
							 xmlns:general="com.mydlp.ui.widget.general.*"
							 xmlns:my="http://www.mydlp.com/flex/my" 
							 title="@Resource(bundle = 'messages', key = 'inventory.newcategory.title')" xmlns:domain="com.mydlp.ui.domain.*" >
	
	<fx:Script>
		<![CDATA[
			import com.mydlp.ui.domain.InventoryItem;
			import com.mydlp.ui.domain.Network;
			import com.mydlp.ui.util.InteractionUtil;
			import com.mydlp.ui.util.LangUtil;
			
			import mx.controls.Alert;
			import mx.rpc.events.ResultEvent;
			
			protected function okHandler(event : ResultEvent):void
			{
				InteractionUtil.closePopup(this);
				Alert.show(	LangUtil.getString("messages", "inventory.newnetwork.ok.message"),
					LangUtil.getString("messages", "inventory.newneywork.ok.title"));
				this.parentApplication["inventoryTree"].refreshTree();
			}
			
		]]>
	</fx:Script>
	
	<fx:Declarations>
		<my:remote id="re" destination="inventoryBRS" >
			<my:method name="save" result="okHandler(event)" />
		</my:remote>
		
		<domain:Network id="newNetwork" />
		<domain:InventoryItem id="newItem" category='{this.parentApplication["inventoryTree"]["selectedItem"]}' item="{newNetwork}" />
	</fx:Declarations>
	<s:Label text="{newNetwork.id}" />
	<mx:Form id="test">
		<mx:FormItem label="@Resource(bundle = 'messages', key = 'inventory.newnetwork.namelabel')" required="true">
			<mx:TextInput id="networkName" text="@{newItem.name}"/>
		</mx:FormItem>
		<mx:FormItem label="@Resource(bundle = 'messages', key = 'inventory.newnetwork.ipbaselabel')" required="true">
			<general:IpAddressInput id="ipbaseValue" change="{newNetwork.ipBase = ipbaseValue.convertIpToInt()}"/>
		</mx:FormItem>
		<mx:FormItem label="@Resource(bundle = 'messages', key = 'inventory.newnetwork.ipmasklabel')" required="true">
			<general:IpAddressInput id="ipmaskValue" change="{newNetwork.ipMask = ipmaskValue.convertIpToInt()}"/>
		</mx:FormItem>
		<mx:FormItem>
			<mx:Button id="createButton" label="@Resource(bundle = 'messages', key = 'inventory.newnetwork.newbutton')" 
					   click="{createButton.enabled = false; re.save(newItem)}"/>
		</mx:FormItem>
	</mx:Form>
	
</general:ClosableTitleWindow>
